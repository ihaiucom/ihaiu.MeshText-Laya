{"version":3,"file":"bundle.js","sources":["../../src/WarBitmapText/TextStyleMap.ts","../../src/WarBitmapText/WarBitmapTextItem.ts","../../src/WarBitmapText/WarBitmapText.ts","../../src/WarBitmapText/TextStyleType.ts","../../src/WarBitmapText/WarBitmapTextLib.ts"],"sourcesContent":["export class TextStyleMap\r\n{\r\n    private typeMap: Map<any, Map<string, string>> = new Map<any, Map<string, string>>();\r\n    defaultType:any;\r\n    GetType(typeKey: any):Map<string, string>\r\n    {\r\n        return this.typeMap.get(typeKey);\r\n    }\r\n\r\n    GetOrCreateType(typeKey: any):Map<string, string>\r\n    {\r\n        if(!this.typeMap.has(typeKey))\r\n        {\r\n            this.typeMap.set(typeKey, new Map<string, string>());\r\n        }\r\n        return this.typeMap.get(typeKey);\r\n    }\r\n    \r\n    GenerateNumType(charts:string,  typeKey: any)\r\n    {\r\n        var map = this.GetOrCreateType(typeKey);\r\n        for(var i = 0; i <= 9; i ++)\r\n        {\r\n            map.set(i.toString(), charts[i]);\r\n        }\r\n    }\r\n\r\n    AddToAllType(chart: string, fontChart?: string)\r\n    {\r\n        if(fontChart === undefined)\r\n        {\r\n            fontChart = chart;\r\n        }\r\n        \r\n        this.typeMap.forEach((map, key)=>\r\n        {\r\n            map.set(chart, fontChart);\r\n        });\r\n    }\r\n\r\n    \r\n    AddToType(chart: string, fontChart: string, typeKey: any)\r\n    {\r\n        var map = this.GetOrCreateType(typeKey);\r\n        map.set(chart, fontChart);\r\n    }\r\n    \r\n    chartsCache:Map<any, Map<string, string>> = new Map<any, Map<string, string>>();\r\n    \r\n    GetOrCreateCache(typeKey: any):Map<string, string>\r\n    {\r\n        if(!this.chartsCache.has(typeKey))\r\n        {\r\n            this.chartsCache.set(typeKey, new Map<string, string>());\r\n        }\r\n        return this.chartsCache.get(typeKey);\r\n    }\r\n    GetCharts(txt: string, typeKey:any):string\r\n    {\r\n        var cahceMap = this.GetOrCreateCache(typeKey);\r\n        if(cahceMap.has(txt))\r\n        {\r\n            return cahceMap.get(txt);\r\n        }\r\n        if(typeKey == this.defaultType)\r\n        {\r\n            return txt;\r\n        }\r\n\r\n        var map = this.GetType(typeKey);\r\n        var str = \"\";\r\n        for(var i = 0, len = txt.length; i < len; i ++)\r\n        {\r\n            if(map.has(txt[i]))\r\n            {\r\n                var chart = map.get(txt[i]);\r\n                str += chart;\r\n            }\r\n            else\r\n            {\r\n                str += txt[i];\r\n            }\r\n        }\r\n        \r\n        cahceMap.set(txt, str);\r\n        \r\n        return str;\r\n\r\n    }\r\n\r\n    \r\n    \r\n\r\n}","import WarBitmapText from \"./WarBitmapText\";\r\nimport Vector2 = Laya.Vector2;\r\nimport Vector3 = Laya.Vector3;\r\nimport Tween = Laya.Tween;\r\nimport Ease = Laya.Ease;\r\nexport default class WarBitmapTextItem\r\n{\r\n    bitmapText: WarBitmapText;\r\n    textTF:Laya.Text;\r\n    public index:number = 0;\r\n    public atlaTypeKey: any;\r\n    public scale: number = 1;\r\n    private _text: string = \"\";\r\n    private _text2: string = \"\";\r\n    constructor(bitmapText: WarBitmapText, index?:number)\r\n    {\r\n        this.bitmapText = bitmapText;\r\n        this.index = index;\r\n\r\n        var tf = new Laya.Text();\r\n        tf.font = bitmapText.fontName;\r\n        tf.align = \"center\";\r\n        tf.width = 250;\r\n        tf.height = 50;\r\n        tf.pivotX = 0.5 * tf.width;\r\n        tf.pivotY = 0.5 * tf.height;\r\n        this.textTF = tf;\r\n    }\r\n\r\n    public get Text():string\r\n    {\r\n        return this._text;\r\n    }\r\n\r\n    public set Text(value: string)\r\n    {\r\n        \r\n        if(this._text == value)\r\n        {\r\n            return;\r\n        }\r\n\r\n        if(value === undefined || value === null)\r\n        {\r\n            value = \"\";\r\n        }\r\n        var str = value;\r\n        if(this.bitmapText.textStyleMap)\r\n        {\r\n            str = this.bitmapText.textStyleMap.GetCharts(value, this.atlaTypeKey);\r\n        }\r\n        if(this._text2 == str)\r\n        {\r\n            return;\r\n        }\r\n        this._text = value;\r\n        this._text2 = str;\r\n\r\n        this.textTF.changeText(str);\r\n        // this.textTF.text = str;\r\n        // window['tf'] = this.textTF;\r\n\r\n    }\r\n\r\n    public position: Vector3 = new Vector3();\r\n\r\n    \r\n    private startX:number = 0;\r\n\r\n    private startY:number = 0;\r\n    private endY:number = 0;\r\n    public tweenRate = 0;\r\n    public StartTween()\r\n    {\r\n        var textTF = this.textTF;\r\n        this.tweenRate = 0;\r\n        this.tweenValue = 0;\r\n        \r\n        let ratio = Number(Math.random().toFixed(2));\r\n        this.startX = textTF.x = (textTF.x - 40 + 80 * ratio);\r\n        this.startY = textTF.y = (textTF.y - 80 * ratio);\r\n        this.endY = this.startY - 80;\r\n\r\n        textTF.scale(0,0);\r\n        textTF.alpha = 1.0;\r\n        this.bitmapText.AddTweenItem(this);\r\n\r\n        // Tween.to(textTF, { scaleX: 1.5, scaleY: 1.5 }, 144, Ease.linearNone, null, 0, false);\r\n        // Tween.to(textTF, { scaleX: 0.8, scaleY: 0.8 }, 144, Ease.linearNone, null, 144, false);\r\n        // Tween.to(textTF, { y: this.startY - 80,alpha: 0.0 }, 400, Ease.linearNone, Laya.Handler.create(this, this.OnTweenEnd), 448, false);\r\n    \r\n    }\r\n\r\n    public tweenSpeed: number = 1;\r\n    private speedRandom = Math.random() * 0.5 + 0.7;\r\n    private tweenValue = 0;\r\n    public UpdateTween(delta: number)\r\n    {\r\n        var t = this.tweenRate += delta   * this.tweenSpeed;\r\n        // this.tweenValue = Mathf.Lerp(this.tweenValue * 0.25, 1.0, this.tweenRate);\r\n\r\n        if(t < 0.17)\r\n        {\r\n            var scale = Mathf.Lerp(0, 1.5, t / 0.17);\r\n            this.textTF.scale(scale, scale);\r\n        }\r\n        else if(t < 0.34)\r\n        {\r\n            var scale = Mathf.Lerp(1.5, 0.8, (t - 0.17) / 0.17);\r\n            this.textTF.scale(scale, scale);\r\n        }\r\n        else if(t > 0.52)\r\n        {\r\n\t\t    t = (t - 0.52) / 0.48;\r\n            this.textTF.y = Mathf.Lerp(this.startY, this.endY, t);\r\n            this.textTF.alpha = 1 - t;\r\n        }\r\n\r\n        if(this.tweenRate >= 1)\r\n        {\r\n            this.OnTweenEnd();\r\n        }\r\n    }\r\n\r\n    Clear()\r\n    {\r\n        Tween.clearAll(this.textTF);\r\n        this.bitmapText.RemoveTweenItem(this);\r\n    }\r\n\r\n    OnTweenEnd()\r\n    {\r\n        Tween.clearAll(this.textTF);\r\n        if(this.bitmapText.debugItemLoop)\r\n        {\r\n            this.textTF.pos(this.position.x, this.position.y);\r\n            this.StartTween();\r\n            return;\r\n        }\r\n        this.RecoverPool();\r\n    }\r\n\r\n    public RecoverPool()\r\n    {\r\n        this.textTF.removeSelf();\r\n        Tween.clearAll(this.textTF);\r\n        this.bitmapText.RemoveTweenItem(this);\r\n        this.bitmapText.RecoverItem(this);\r\n    }\r\n\r\n}","import Text = Laya.Text;\r\nimport BitmapFont = Laya.BitmapFont;\r\nimport Handler = Laya.Handler;\r\nimport { TextStyleMap } from \"./TextStyleMap\";\r\nimport { TextStyleType } from \"./TextStyleType\";\r\nimport WarBitmapTextItem from \"./WarBitmapTextItem\";\r\nexport default class WarBitmapText extends Laya.Sprite\r\n{\r\n    enable: boolean = true;\r\n    debugItemLoop: boolean = false;\r\n\r\n    private static UID = 0;\r\n    uid: number = 0;\r\n    private itemPoolKey: string;\r\n\r\n    fontName: string = \"WarFont\";\r\n    bitmapFont: BitmapFont;\r\n    textStyleMap: TextStyleMap;\r\n\r\n    constructor()\r\n    {\r\n        super();\r\n        \r\n        this.uid = WarBitmapText.UID ++;\r\n        this.itemPoolKey = \"WarBitmapTextItem__\" + this.uid;\r\n    }\r\n\r\n    LoadFont(path: string, callback?:Function)\r\n    {\r\n        var bitmapFont: BitmapFont = new BitmapFont();\r\n        this.bitmapFont = bitmapFont;\r\n        bitmapFont.loadFont(path, new Handler(this, ()=>\r\n        {\r\n            bitmapFont.setSpaceWidth(10);\r\n            Text.registerBitmapFont(this.fontName, bitmapFont);\r\n            if(callback)\r\n            {\r\n                callback();\r\n            }\r\n        }));\r\n    }\r\n\r\n    InitItemPool(maxTextNum: number = 100)\r\n    {\r\n        for(var i = maxTextNum - 1; i >= 0; i --)\r\n        {\r\n            var item = new WarBitmapTextItem(this, i);\r\n            Laya.Pool.recover(this.itemPoolKey, item);\r\n        }\r\n    }\r\n    \r\n    textItemCache: Map<any, Map<string, WarBitmapTextItem[]>> = new Map<any, Map<string, WarBitmapTextItem[]>>();\r\n\r\n    GetItemCacheByType(text: string, atlaTypeKey: any):WarBitmapTextItem[]\r\n    {\r\n        var typeMap: Map<string, WarBitmapTextItem[]>;\r\n        if(this.textItemCache.has(atlaTypeKey))\r\n        {\r\n            typeMap = this.textItemCache.get(atlaTypeKey);\r\n        }\r\n        else\r\n        {\r\n            typeMap = new Map<string, WarBitmapTextItem[]>();\r\n            this.textItemCache.set(atlaTypeKey, typeMap);\r\n        }\r\n\r\n        if(typeMap.has(text))\r\n        {\r\n            return typeMap.get(text);\r\n        }\r\n        else\r\n        {\r\n            var list = [];\r\n            typeMap.set(text, list);\r\n            return list;\r\n        }\r\n    }\r\n\r\n    RecoverItemCache(item:WarBitmapTextItem)\r\n    {\r\n        var list = this.GetItemCacheByType(item.Text, item.atlaTypeKey);\r\n        list.push(item);\r\n    }\r\n\r\n    \r\n    RemoveFromItemCache(item:WarBitmapTextItem)\r\n    {\r\n        if(!item.atlaTypeKey)\r\n        {\r\n            return;\r\n        }\r\n        var list = this.GetItemCacheByType(item.Text, item.atlaTypeKey);\r\n        var i = list.indexOf(item);\r\n        if(i != -1)\r\n        {\r\n            list.splice(i, 1);\r\n        }\r\n    }\r\n\r\n    GetItemCache(text: string, atlaTypeKey: any):WarBitmapTextItem\r\n    {\r\n        var list = this.GetItemCacheByType(text, atlaTypeKey);\r\n        if(list.length > 0)\r\n        {\r\n            var item = list.shift();\r\n            var pool = Laya.Pool.getPoolBySign(this.itemPoolKey);\r\n            var i = pool.indexOf(item);\r\n            if(i != -1)\r\n            {\r\n                item[Laya.Pool.POOLSIGN] = false;\r\n                pool.splice(i, 1);\r\n            }\r\n            return item;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    useItemList:WarBitmapTextItem[] = [];\r\n    GetItem(text: string, position = new Laya.Vector3(0, 0, 0), atlaTypeKey?: any, scale: number = 1.0):WarBitmapTextItem\r\n    {\r\n        var item:WarBitmapTextItem = this.GetItemCache(text, atlaTypeKey);\r\n        if(item == null)\r\n        {\r\n            item = Laya.Pool.getItem(this.itemPoolKey);\r\n            if(item)\r\n            {\r\n                this.RemoveFromItemCache(item);\r\n            }\r\n        }\r\n\r\n\r\n        if(item == null)\r\n        {\r\n            if(this.useItemList.length > 0)\r\n            {\r\n                item = this.useItemList.shift();\r\n                item.Clear();\r\n                this.RemoveFromItemCache(item);\r\n                // item.RecoverPool();\r\n            }\r\n        }\r\n\r\n        if(!item)\r\n        {\r\n            return null;\r\n        }\r\n\r\n        if(this.camera)\r\n        {\r\n            this.camera.worldToViewportPoint(position, item.position);\r\n            position = item.position;\r\n        }\r\n        item.atlaTypeKey = atlaTypeKey;\r\n        item.position = position;\r\n        item.textTF.pos(position.x, position.y);\r\n        item.scale = scale;\r\n        item.Text = text;\r\n        this.useItemList.push(item);\r\n        return item;\r\n    } \r\n\r\n    PlayItem(text: string, position = new Laya.Vector3(0, 0, 0), atlaTypeKey?: any, scale: number = 1.0, tweenSpeed:number = 1.0):WarBitmapTextItem\r\n    {\r\n        if(!this.enable) return ;\r\n        var item:WarBitmapTextItem = this.GetItem(text, position, atlaTypeKey, scale);\r\n        if(!item)\r\n        {\r\n            return null;\r\n        }\r\n        item.tweenSpeed = tweenSpeed;\r\n        this.addChild(item.textTF);\r\n        item.StartTween();\r\n        return item;\r\n    }\r\n\r\n    private RemoveUseFromList(item:WarBitmapTextItem)\r\n    {\r\n        var index = this.useItemList.indexOf(item);\r\n        if(index != -1)\r\n        {\r\n            this.useItemList.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    RecoverItem(item:WarBitmapTextItem)\r\n    {\r\n        this.RecoverItemCache(item);\r\n        Laya.Pool.recover(this.itemPoolKey, item);\r\n        this.RemoveUseFromList(item);\r\n    }\r\n\r\n    tweenItemList: WarBitmapTextItem[] = [];\r\n\r\n    AddTweenItem(item:WarBitmapTextItem)\r\n    {\r\n        var index = this.tweenItemList.indexOf(item);\r\n        if(index == -1)\r\n        {\r\n            this.tweenItemList.push(item);\r\n        }\r\n    }\r\n\r\n    RemoveTweenItem(item:WarBitmapTextItem)\r\n    {\r\n        var index = this.tweenItemList.indexOf(item);\r\n        if(index != -1)\r\n        {\r\n            this.tweenItemList.splice(index, 1);\r\n        }\r\n    }\r\n    StartUpdate()\r\n    {\r\n        Laya.timer.frameLoop(1, this, this.OnLoop);\r\n    }\r\n\r\n    StopUpdate()\r\n    {\r\n        Laya.timer.clear(this, this.OnLoop);\r\n    }\r\n\r\n    OnLoop()\r\n    {\r\n        var delta = Laya.timer.delta * 0.001;\r\n        for(var i = this.tweenItemList.length - 1; i >= 0; i --)\r\n        {\r\n            var item = this.tweenItemList[i];\r\n            item.UpdateTween(delta);\r\n        }\r\n    }\r\n\r\n    camera: Laya.Camera;\r\n    \r\n    __parent: Laya.Node;\r\n    __parentIndex:number;\r\n    SetParent(parent: Laya.Node, parentIndex?:number)\r\n    {\r\n        this.__parent = parent;\r\n        this.__parentIndex = parentIndex;\r\n    }\r\n\r\n\r\n    Show()\r\n    {\r\n        if(this.__parentIndex != undefined)\r\n        {\r\n            this.__parent.addChildAt(this, this.__parentIndex);\r\n        }\r\n        else\r\n        {\r\n            this.__parent.addChild(this);\r\n        }\r\n        this.StartUpdate();\r\n    }\r\n\r\n    Hide()\r\n    {\r\n        this.Clear();\r\n        this.removeSelf();\r\n        this.StopUpdate();\r\n    }\r\n\r\n    Clear()\r\n    {\r\n        while(this.useItemList.length > 0)\r\n        {\r\n            var item = this.useItemList.shift();\r\n            item.RecoverPool();\r\n        }\r\n        this.tweenItemList.length = 0;\r\n    }\r\n\r\n\r\n}","export enum TextStyleType\r\n{\r\n    White = 0,\r\n    Red ,\r\n    Yellow ,\r\n    Green ,\r\n}","import { TextStyleMap } from \"./TextStyleMap\";\r\nimport WarBitmapText from \"./WarBitmapText\";\r\nimport { TextStyleType } from \"./TextStyleType\";\r\n\r\n\r\nexport default class WarBitmapTextLib\r\n{\r\n    static defaultAtlas: TextStyleMap;\r\n    static defaultText: WarBitmapText;\r\n\r\n    static async LoadDefalutAsync()\r\n    {\r\n        if(this.defaultAtlas)\r\n        {\r\n            return;\r\n        }\r\n        \r\n\r\n        var text = this.defaultText = new WarBitmapText();\r\n        var style = this.defaultAtlas = new TextStyleMap();\r\n        this.defaultText.textStyleMap = style;\r\n        style.GenerateNumType(\"012345679\", TextStyleType.White);\r\n        style.GenerateNumType(\"qwertyuiop\", TextStyleType.Red);\r\n        style.GenerateNumType(\"asdfghjkl;\", TextStyleType.Yellow);\r\n        style.GenerateNumType(\"zxcvbnm,./\", TextStyleType.Green);\r\n        // style.GenerateNumType(\"零一二三四五六七八九\", TextStyleType.WhiteBig);\r\n        // style.AddToAllType(\"d\", \"闪\");\r\n        // style.AddToAllType(\"c\", \"暴\");\r\n        // style.AddToType(\"c\", \"爆\", TextStyleType.Red);\r\n\r\n        return new Promise<WarBitmapText>((resolve)=>\r\n        {\r\n            text.LoadFont(\"res/font/damage-export.fnt\", ()=>\r\n            {\r\n                text.InitItemPool();\r\n                resolve(text);\r\n            });\r\n         });\r\n    }\r\n}\r\n\r\n\r\nwindow['TextStyleType'] = TextStyleType;\r\nwindow['WarBitmapText'] = WarBitmapText;\r\nwindow['WarBitmapTextLib'] = WarBitmapTextLib;"],"names":[],"mappings":"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"}